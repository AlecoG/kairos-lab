---
import BaseLayout from "../layouts/BaseLayout.astro";
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith("/") ? rawBase : `${rawBase}/`;
---

<BaseLayout
  title="Kairos Lab | Barbería"
  description="Kairos Lab Barbería: cortes, barba, cejas, lavado y tratamientos capilares. Agenda tu cita por WhatsApp."
  page="home"
>
  <Fragment slot="head">
    <link
      rel="preload"
      as="image"
      href={`${base}assets/branding/logo-308.webp`}
      imagesrcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
      imagesizes="(max-width: 640px) 170px, 220px"
      fetchpriority="high"
    />
  </Fragment>

  <header class="sticky top-0 z-20 border-b border-[#e8e8e8] bg-white/85 backdrop-blur-[10px]" id="top">
    <div class="container flex items-center justify-between gap-4 py-3.5">
      <a class="flex shrink-0 items-center no-underline" href="#top" aria-label="Ir al inicio">
        <picture class="block">
          <source
            type="image/webp"
            srcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
            sizes="(max-width: 640px) 170px, 220px"
          />
          <img
            class="block h-[50px] w-auto max-w-[220px] object-contain max-[640px]:h-[42px] max-[640px]:max-w-[170px]"
            src={`${base}assets/branding/logo.jpg`}
            alt="Kairos Lab"
            width="306"
            height="146"
            fetchpriority="high"
            decoding="async"
          />
        </picture>
      </a>

      <nav class="relative" aria-label="Navegación principal">
        <button
          class="inline-flex cursor-pointer rounded-[10px] border border-[#e8e8e8] bg-white px-3 py-2 leading-none min-[641px]:hidden"
          id="navToggle"
          aria-expanded="false"
          aria-controls="navMenu"
        >
          <span class="sr-only">Abrir menú</span>
          ☰
        </button>

        <div
          class="hidden items-center gap-4 min-[641px]:flex max-[640px]:absolute max-[640px]:right-0 max-[640px]:top-[calc(100%+10px)] max-[640px]:w-[min(92vw,340px)] max-[640px]:flex-col max-[640px]:items-stretch max-[640px]:rounded-[14px] max-[640px]:border max-[640px]:border-[#e8e8e8] max-[640px]:bg-white max-[640px]:p-3 max-[640px]:shadow-[0_10px_30px_rgba(0,0,0,.08)] [&.is-open]:flex"
          id="navMenu"
          aria-hidden="true"
        >
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href="#servicios">Servicios</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href="#productos">Productos</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href="#ubicacion">Ubicación</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href="#contacto">Contacto</a>
          <a class="btn btn--primary" id="btnCitaTop" href="#" target="_blank" rel="noopener">Agendar cita</a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section
      class="border-b border-[#e8e8e8] py-10 md:py-14"
      style="background: radial-gradient(800px 400px at 10% 10%, rgba(0,0,0,.06), transparent 60%), radial-gradient(800px 400px at 90% 30%, rgba(0,0,0,.04), transparent 60%);"
    >
      <div class="container grid items-start gap-8 lg:grid-cols-[1.1fr_.9fr]">
        <div class="hero__content">
          <p class="tw-chip">Barbería · Estilo · Cuidado capilar</p>
          <h1>Kairos Lab</h1>
          <p class="mb-5 text-[1.05rem] leading-relaxed text-[#6b6b6b]">
            Una experiencia limpia y precisa: corte, barba, cejas, lavado y tratamientos capilares.
            Agenda tu cita en segundos por WhatsApp.
          </p>

          <div class="mb-6 flex flex-wrap gap-3.5">
            <a class="btn btn--primary" id="btnCitaHero" href="#" target="_blank" rel="noopener">
              Agendar cita por WhatsApp
            </a>
            <a class="btn btn--ghost" href="#servicios">Ver servicios</a>
          </div>

          <div class="grid grid-cols-1 gap-4 border-t border-dashed border-[#e8e8e8] pt-4 sm:grid-cols-2">
            <div class="meta__item">
              <span class="block text-sm font-bold text-[#6b6b6b]">Horario</span>
              <span class="mt-1 block font-bold">Lun–Dom · 10:00–22:00</span>
            </div>
            <div class="meta__item">
              <span class="block text-sm font-bold text-[#6b6b6b]">Atención</span>
              <span class="mt-1 block font-bold">Con cita · Walk-ins según disponibilidad</span>
            </div>
          </div>
        </div>

        <div>
          <div class="card card--glass p-5">
            <h2 class="card__title">Reserva rápida</h2>
            <p class="card__text">Cuéntanos qué necesitas y te confirmamos el horario.</p>

            <form class="form" id="quickForm">
              <label class="field">
                <span class="field__label">Servicio</span>
                <select class="field__control" id="serviceSelect" required>
                  <option value="Corte de cabello">Corte de cabello</option>
                  <option value="Barba">Barba</option>
                  <option value="Cejas">Cejas</option>
                  <option value="Lavado de cabeza">Lavado de cabeza</option>
                  <option value="Tratamientos capilares">Tratamientos capilares</option>
                </select>
              </label>

              <label class="field">
                <span class="field__label">Nombre</span>
                <input class="field__control" id="nameInput" type="text" placeholder="Tu nombre" />
              </label>

              <label class="field">
                <span class="field__label">Nota</span>
                <input class="field__control" id="noteInput" type="text" placeholder="Ej. degradado medio, barba perfilada…" />
              </label>

              <button class="btn btn--primary btn--full" type="submit">
                Enviar a WhatsApp
              </button>

              <p class="form__hint">
                Al enviar, se abrirá WhatsApp con un mensaje listo para enviar.
              </p>
            </form>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="servicios">
      <div class="container">
        <div class="section__head">
          <h2>Servicios</h2>
          <p>Selecciona lo que necesitas. Todo con enfoque limpio, profesional y detallista.</p>
        </div>

        <div class="grid" id="servicesGrid"></div>
      </div>
    </section>

    <section class="section section--alt" id="productos">
      <div class="container">
        <div class="section__head">
          <h2>Catálogo de productos</h2>
          <p>Productos recomendados para mantener el look en casa.</p>
        </div>

        <div class="toolbar">
          <div class="toolbar__left">
            <label class="search">
              <span class="sr-only">Buscar</span>
              <input id="productSearch" type="search" placeholder="Buscar: cera, shampoo, aceite…" />
            </label>
          </div>
          <div class="toolbar__right">
            <button class="btn btn--ghost" id="clearFilters">Limpiar</button>
            <a class="btn btn--primary" href={`${base}catalogo/`}>Ver todos los productos</a>
          </div>
        </div>

        <div class="grid grid--carousel-mobile" id="productsGrid"></div>
      </div>
    </section>

    <section class="section" id="ubicacion">
      <div class="container">
        <div class="section__head">
          <h2>Ubicación</h2>
          <p>Estamos en Vedado, La Habana. Puedes abrir la ruta o ver el mapa aquí mismo.</p>
        </div>

        <div class="split">
          <div class="panel">
            <h3>Dirección</h3>
            <p class="muted">
              Calle 21 / 8 y 10<br />
              Vedado, Havana, Cuba
            </p>
            <div class="panel__actions">
              <a class="btn btn--ghost" href="https://maps.google.com/?q=Calle+21+%2F+8+y+10%2C+Vedado%2C+Havana%2C+Cuba" target="_blank" rel="noopener">Abrir en Google Maps</a>
              <a class="btn btn--primary" id="btnCitaUbicacion" href="#" target="_blank" rel="noopener">Agendar cita</a>
            </div>
          </div>

          <div class="map">
            <iframe
              title="Mapa de Kairos Lab"
              data-src="https://maps.google.com/maps?q=Calle%2021%20%2F%208%20y%2010%2C%20Vedado%2C%20Havana%2C%20Cuba&z=16&output=embed"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              allowfullscreen
            ></iframe>
            <noscript>
              <iframe
                title="Mapa de Kairos Lab"
                src="https://maps.google.com/maps?q=Calle%2021%20%2F%208%20y%2010%2C%20Vedado%2C%20Havana%2C%20Cuba&z=16&output=embed"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                allowfullscreen
              ></iframe>
            </noscript>
          </div>
        </div>
      </div>
    </section>

    <section class="section section--alt" id="contacto">
      <div class="container footer__grid">
        <div>
          <h2>Kairos Lab</h2>
          <p class="muted">
            Barbería con estética minimalista: blanco y gris, enfoque premium y sin complicaciones.
          </p>
          <div class="social">
            <a class="social__link" href="#" aria-label="Instagram (actualiza el link)">Instagram</a>
            <a class="social__link" href="#" aria-label="TikTok (actualiza el link)">TikTok</a>
          </div>
        </div>

        <div>
          <h3>Contacto</h3>
          <ul class="list">
            <li><span class="muted">WhatsApp:</span> <a id="waLinkFooter" href="#" target="_blank" rel="noopener">Enviar mensaje</a></li>
            <li><span class="muted">Tel:</span> <a href="tel:+53 00000000">+53 0000 0000</a></li>
            <li><span class="muted">Email:</span> <a href="mailto:contacto@kairoslab.com">contacto@kairoslab.com</a></li>
            <li><span class="muted">Dirección:</span> Calle 21 / 8 y 10, Vedado, Havana, Cuba</li>
          </ul>
        </div>

        <div>
          <h3>Horarios</h3>
          <ul class="list">
            <li><span class="muted">Lunes a domingo:</span> 10:00–22:00</li>
          </ul>
        </div>
      </div>

      <div class="container footer__bottom">
        <p class="muted">© <span id="year"></span> Kairos Lab. Todos los derechos reservados.</p>
        <a class="muted" href="#top">Volver arriba ↑</a>
      </div>
    </section>
  </main>

  <a class="float-cta" id="floatCta" href="#" target="_blank" rel="noopener" aria-label="Agendar por WhatsApp">
    WhatsApp · Agendar
  </a>
</BaseLayout>
