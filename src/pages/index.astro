---
import BaseLayout from "../layouts/BaseLayout.astro";
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith("/") ? rawBase : `${rawBase}/`;
---

<BaseLayout
  title="Kairos Lab | Barbería"
  description="Kairos Lab Barbería: cortes, barba, cejas, lavado y tratamientos capilares. Agenda tu cita por WhatsApp."
  page="home"
>
  <Fragment slot="head">
    <link
      rel="preload"
      as="image"
      href={`${base}assets/branding/logo-308.webp`}
      imagesrcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
      imagesizes="(max-width: 640px) 170px, 220px"
      fetchpriority="high"
    />
  </Fragment>

  <header class="header" id="top">
    <div class="container header__inner">
      <a class="brand" href="#top" aria-label="Ir al inicio">
        <picture>
          <source
            type="image/webp"
            srcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
            sizes="(max-width: 640px) 170px, 220px"
          />
          <img
            class="brand__logo"
            src={`${base}assets/branding/logo.jpg`}
            alt="Kairos Lab"
            width="306"
            height="146"
            fetchpriority="high"
            decoding="async"
          />
        </picture>
      </a>

      <nav class="nav" aria-label="Navegación principal">
        <button class="nav__toggle" id="navToggle" aria-expanded="false" aria-controls="navMenu">
          <span class="sr-only">Abrir menú</span>
          ☰
        </button>

        <div class="nav__menu" id="navMenu" aria-hidden="true">
          <a class="nav__link" href="#servicios">Servicios</a>
          <a class="nav__link" href="#productos">Productos</a>
          <a class="nav__link" href="#ubicacion">Ubicación</a>
          <a class="nav__link" href="#contacto">Contacto</a>
          <a class="btn btn--primary" id="btnCitaTop" href="#" target="_blank" rel="noopener">Agendar cita</a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero__grid">
        <div class="hero__content">
          <p class="badge tw-chip">Barbería · Estilo · Cuidado capilar</p>
          <h1>Kairos Lab</h1>
          <p class="hero__subtitle">
            Una experiencia limpia y precisa: corte, barba, cejas, lavado y tratamientos capilares.
            Agenda tu cita en segundos por WhatsApp.
          </p>

          <div class="hero__actions">
            <a class="btn btn--primary" id="btnCitaHero" href="#" target="_blank" rel="noopener">
              Agendar cita por WhatsApp
            </a>
            <a class="btn btn--ghost" href="#servicios">Ver servicios</a>
          </div>

          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">Horario</span>
              <span class="meta__value">Lun–Dom · 10:00–22:00</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">Atención</span>
              <span class="meta__value">Con cita · Walk-ins según disponibilidad</span>
            </div>
          </div>
        </div>

        <div class="hero__card">
          <div class="card card--glass">
            <h2 class="card__title">Reserva rápida</h2>
            <p class="card__text">Cuéntanos qué necesitas y te confirmamos el horario.</p>

            <form class="form" id="quickForm">
              <label class="field">
                <span class="field__label">Servicio</span>
                <select class="field__control" id="serviceSelect" required>
                  <option value="Corte de cabello">Corte de cabello</option>
                  <option value="Barba">Barba</option>
                  <option value="Cejas">Cejas</option>
                  <option value="Lavado de cabeza">Lavado de cabeza</option>
                  <option value="Tratamientos capilares">Tratamientos capilares</option>
                </select>
              </label>

              <label class="field">
                <span class="field__label">Nombre</span>
                <input class="field__control" id="nameInput" type="text" placeholder="Tu nombre" />
              </label>

              <label class="field">
                <span class="field__label">Nota</span>
                <input class="field__control" id="noteInput" type="text" placeholder="Ej. degradado medio, barba perfilada…" />
              </label>

              <button class="btn btn--primary btn--full" type="submit">
                Enviar a WhatsApp
              </button>

              <p class="form__hint">
                Al enviar, se abrirá WhatsApp con un mensaje listo para enviar.
              </p>
            </form>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="servicios">
      <div class="container">
        <div class="section__head">
          <h2>Servicios</h2>
          <p>Selecciona lo que necesitas. Todo con enfoque limpio, profesional y detallista.</p>
        </div>

        <div class="grid" id="servicesGrid"></div>
      </div>
    </section>

    <section class="section section--alt" id="productos">
      <div class="container">
        <div class="section__head">
          <h2>Catálogo de productos</h2>
          <p>Productos recomendados para mantener el look en casa.</p>
        </div>

        <div class="toolbar">
          <div class="toolbar__left">
            <label class="search">
              <span class="sr-only">Buscar</span>
              <input id="productSearch" type="search" placeholder="Buscar: cera, shampoo, aceite…" />
            </label>
          </div>
          <div class="toolbar__right">
            <button class="btn btn--ghost" id="clearFilters">Limpiar</button>
            <a class="btn btn--primary" href={`${base}catalogo/`}>Ver todos los productos</a>
          </div>
        </div>

        <div class="grid grid--carousel-mobile" id="productsGrid"></div>
      </div>
    </section>

    <section class="section" id="ubicacion">
      <div class="container">
        <div class="section__head">
          <h2>Ubicación</h2>
          <p>Estamos en Vedado, La Habana. Puedes abrir la ruta o ver el mapa aquí mismo.</p>
        </div>

        <div class="split">
          <div class="panel">
            <h3>Dirección</h3>
            <p class="muted">
              Calle 21 / 8 y 10<br />
              Vedado, Havana, Cuba
            </p>
            <div class="panel__actions">
              <a class="btn btn--ghost" href="https://maps.google.com/?q=Calle+21+%2F+8+y+10%2C+Vedado%2C+Havana%2C+Cuba" target="_blank" rel="noopener">Abrir en Google Maps</a>
              <a class="btn btn--primary" id="btnCitaUbicacion" href="#" target="_blank" rel="noopener">Agendar cita</a>
            </div>
          </div>

          <div class="map">
            <iframe
              title="Mapa de Kairos Lab"
              data-src="https://maps.google.com/maps?q=Calle%2021%20%2F%208%20y%2010%2C%20Vedado%2C%20Havana%2C%20Cuba&z=16&output=embed"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              allowfullscreen
            ></iframe>
            <noscript>
              <iframe
                title="Mapa de Kairos Lab"
                src="https://maps.google.com/maps?q=Calle%2021%20%2F%208%20y%2010%2C%20Vedado%2C%20Havana%2C%20Cuba&z=16&output=embed"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                allowfullscreen
              ></iframe>
            </noscript>
          </div>
        </div>
      </div>
    </section>

    <section class="section section--alt" id="contacto">
      <div class="container footer__grid">
        <div>
          <h2>Kairos Lab</h2>
          <p class="muted">
            Barbería con estética minimalista: blanco y gris, enfoque premium y sin complicaciones.
          </p>
          <div class="social">
            <a class="social__link" href="#" aria-label="Instagram (actualiza el link)">Instagram</a>
            <a class="social__link" href="#" aria-label="TikTok (actualiza el link)">TikTok</a>
          </div>
        </div>

        <div>
          <h3>Contacto</h3>
          <ul class="list">
            <li><span class="muted">WhatsApp:</span> <a id="waLinkFooter" href="#" target="_blank" rel="noopener">Enviar mensaje</a></li>
            <li><span class="muted">Tel:</span> <a href="tel:+53 00000000">+53 0000 0000</a></li>
            <li><span class="muted">Email:</span> <a href="mailto:contacto@kairoslab.com">contacto@kairoslab.com</a></li>
            <li><span class="muted">Dirección:</span> Calle 21 / 8 y 10, Vedado, Havana, Cuba</li>
          </ul>
        </div>

        <div>
          <h3>Horarios</h3>
          <ul class="list">
            <li><span class="muted">Lunes a domingo:</span> 10:00–22:00</li>
          </ul>
        </div>
      </div>

      <div class="container footer__bottom">
        <p class="muted">© <span id="year"></span> Kairos Lab. Todos los derechos reservados.</p>
        <a class="muted" href="#top">Volver arriba ↑</a>
      </div>
    </section>
  </main>

  <a class="float-cta" id="floatCta" href="#" target="_blank" rel="noopener" aria-label="Agendar por WhatsApp">
    WhatsApp · Agendar
  </a>
</BaseLayout>
