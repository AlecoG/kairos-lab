---
import BaseLayout from "../layouts/BaseLayout.astro";
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith("/") ? rawBase : `${rawBase}/`;
---

<BaseLayout
  title="Catálogo | Kairos Lab"
  description="Catálogo completo de productos Kairos Lab: styling, barba, cuidado capilar y más."
  page="catalogo"
>
  <Fragment slot="head">
    <link
      rel="preload"
      as="image"
      href={`${base}assets/branding/logo-308.webp`}
      imagesrcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
      imagesizes="(max-width: 640px) 170px, 220px"
      fetchpriority="high"
    />
  </Fragment>

  <header class="sticky top-0 z-20 border-b border-[#e8e8e8] bg-white/85 backdrop-blur-[10px]" id="top">
    <div class="container flex items-center justify-between gap-4 py-3.5">
      <a class="flex shrink-0 items-center no-underline" href={base} aria-label="Ir al inicio">
        <picture class="block">
          <source
            type="image/webp"
            srcset={`${base}assets/branding/logo-154.webp 154w, ${base}assets/branding/logo-308.webp 308w`}
            sizes="(max-width: 640px) 170px, 220px"
          />
          <img
            class="block h-[50px] w-auto max-w-[220px] object-contain max-[640px]:h-[42px] max-[640px]:max-w-[170px]"
            src={`${base}assets/branding/logo.jpg`}
            alt="Kairos Lab"
            width="306"
            height="146"
            fetchpriority="high"
            decoding="async"
          />
        </picture>
      </a>

      <nav class="relative" aria-label="Navegación principal">
        <button
          class="inline-flex cursor-pointer rounded-[10px] border border-[#e8e8e8] bg-white px-3 py-2 leading-none min-[641px]:hidden"
          id="navToggle"
          aria-expanded="false"
          aria-controls="navMenu"
        >
          <span class="sr-only">Abrir menú</span>
          ☰
        </button>

        <div
          class="hidden items-center gap-4 min-[641px]:flex max-[640px]:absolute max-[640px]:right-0 max-[640px]:top-[calc(100%+10px)] max-[640px]:w-[min(92vw,340px)] max-[640px]:flex-col max-[640px]:items-stretch max-[640px]:rounded-[14px] max-[640px]:border max-[640px]:border-[#e8e8e8] max-[640px]:bg-white max-[640px]:p-3 max-[640px]:shadow-[0_10px_30px_rgba(0,0,0,.08)] [&.is-open]:flex"
          id="navMenu"
          aria-hidden="true"
        >
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href={base}>Inicio</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href={`${base}#servicios`}>Servicios</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href={`${base}#ubicacion`}>Ubicación</a>
          <a class="font-semibold text-[#6b6b6b] no-underline transition-colors hover:text-[#111111]" href={`${base}#contacto`}>Contacto</a>
          <a class="btn btn--primary" id="btnCitaTop" href="#" target="_blank" rel="noopener">Agendar cita</a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="section catalog-hero">
      <div class="container">
        <p class="badge tw-chip">Catálogo completo</p>
        <h1>Productos Kairos Lab</h1>
        <p class="hero__subtitle">
          Explora todos los productos disponibles para barba, cuidado capilar y estilizado.
          Usa el buscador para encontrar rápido lo que necesitas.
        </p>
      </div>
    </section>

    <section class="section section--alt" id="productos">
      <div class="container">
        <div class="section__head">
          <h2>Ver todos los productos</h2>
          <p>Estos son los productos más vendidos.</p>
        </div>

        <div class="toolbar">
          <div class="toolbar__left">
            <label class="search">
              <span class="sr-only">Buscar</span>
              <input id="productSearch" type="search" placeholder="Buscar por nombre, categoría o descripción…" />
            </label>
          </div>
          <div class="toolbar__right">
            <button class="btn btn--ghost" id="clearFilters">Limpiar</button>
            <a class="btn btn--ghost" href={`${base}#productos`}>Volver a la home</a>
          </div>
        </div>

        <div class="filters" id="categoryFilters" role="group" aria-label="Filtrar por categoría"></div>

        <aside class="catalog-cart card" id="catalogCart" aria-live="polite">
          <div class="catalog-cart__head">
            <h3>Carrito</h3>
            <span class="catalog-cart__count" id="cartCount">0 productos</span>
          </div>

          <div class="catalog-cart__items" id="cartItems">
            <p class="muted">Aún no agregas productos.</p>
          </div>

          <div class="catalog-cart__actions">
            <button class="btn btn--ghost" id="clearCart" type="button">Vaciar carrito</button>
            <button class="btn btn--primary" id="buyCart" type="button">Comprar por WhatsApp</button>
          </div>
        </aside>

        <div class="grid" id="productsGrid"></div>
      </div>
    </section>

    <section class="section" id="contacto">
      <div class="container footer__grid">
        <div>
          <h2>Kairos Lab</h2>
          <p class="muted">
            Barbería con estética minimalista: blanco y gris, enfoque premium y sin complicaciones.
          </p>
          <div class="social">
            <a class="social__link" href="#" aria-label="Instagram (actualiza el link)">Instagram</a>
            <a class="social__link" href="#" aria-label="TikTok (actualiza el link)">TikTok</a>
          </div>
        </div>

        <div>
          <h3>Contacto</h3>
          <ul class="list">
            <li><span class="muted">WhatsApp:</span> <a id="waLinkFooter" href="#" target="_blank" rel="noopener">Enviar mensaje</a></li>
            <li><span class="muted">Tel:</span> <a href="tel:+0000000000">+00 0000 0000</a></li>
            <li><span class="muted">Email:</span> <a href="mailto:contacto@kairoslab.com">contacto@kairoslab.com</a></li>
            <li><span class="muted">Dirección:</span> Calle 21 / 8 y 10, Vedado, Havana, Cuba</li>
          </ul>
        </div>

        <div>
          <h3>Horarios</h3>
          <ul class="list">
            <li><span class="muted">Lunes a domingo:</span> 10:00–22:00</li>
          </ul>
        </div>
      </div>

      <div class="container footer__bottom">
        <p class="muted">© <span id="year"></span> Kairos Lab. Todos los derechos reservados.</p>
        <a class="muted" href="#top">Volver arriba ↑</a>
      </div>
    </section>
  </main>

  <a class="float-cta float-cta--hidden" id="floatCta" href="#" target="_blank" rel="noopener" aria-label="Comprar por WhatsApp">
    WhatsApp · Comprar
  </a>
</BaseLayout>
